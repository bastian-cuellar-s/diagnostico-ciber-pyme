<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Diagn√≥stico de Ciberseguridad para PyMEs</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <button id="themeToggle" class="btn btn-sm btn-outline-secondary position-fixed" style="top: 16px; right: 16px; z-index: 1000;" title="Cambiar tema">üåô</button>

  <main id="app" class="container py-4">
    <section class="hero shadow-sm p-4 p-lg-5 mb-4 rounded-4 bg-white">
      <div class="d-flex flex-wrap align-items-start gap-3">
        <div class="flex-grow-1">
          <p class="badge text-bg-primary mb-2">MVP sin instalaciones</p>
          <h1 class="fw-bold mb-2">Diagn√≥stico r√°pido de ciberseguridad para tu PyME</h1>
          <p class="text-secondary mb-3">Basado en NIST CSF. Responde pocas preguntas, guarda tu avance en el navegador y genera un radar con tus resultados y una hoja de ruta con recomendaciones inmediatas.</p>
          <div class="d-flex flex-wrap gap-2">
            <button id="startBtn" class="btn btn-primary">Comenzar diagn√≥stico</button>
            <button id="demoBtn" class="btn btn-outline-success">Demo (5 preguntas)</button>
            <button id="resumeBtn" class="btn btn-outline-primary">Continuar donde lo dej√©</button>
            <button id="clearBtn" class="btn btn-outline-danger">Borrar datos</button>
          </div>
          <small class="text-secondary d-block mt-2">Todo se guarda en tu navegador con <code>localStorage</code>. No hay env√≠os al servidor.</small>
        </div>
        <div class="summary-pill text-center">
          <div class="small text-secondary">Puntuaci√≥n actual</div>
          <div id="pillScore" class="display-5 fw-bold text-primary">--%</div>
          <div class="small text-secondary">Se actualiza al contestar</div>
        </div>
      </div>
    </section>

    <section id="wizardCard" class="card border-0 shadow-sm mb-4 d-none">
      <div class="card-body p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div>
            <div class="text-uppercase text-secondary fw-semibold small" id="stepLabel">Paso 1 de 5</div>
            <h2 class="h4 mb-0" id="categoryTitle">Identificar</h2>
          </div>
          <span class="badge rounded-pill bg-light text-secondary" id="questionId">ID.AM-1</span>
        </div>
        <div class="progress rounded-pill mb-3" style="height: 10px;">
          <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%"></div>
        </div>
        <p class="lead" id="questionText">...</p>
        <div class="btn-group w-100 mb-3" role="group" aria-label="Opciones de respuesta">
          <button type="button" class="btn btn-outline-success" data-answer="yes">S√≠</button>
          <button type="button" class="btn btn-outline-danger" data-answer="no">No</button>
          <button type="button" class="btn btn-outline-secondary" data-answer="unsure">No estoy seguro</button>
        </div>
        <div class="d-flex justify-content-between align-items-center gap-2">
          <button id="prevBtn" class="btn btn-link text-decoration-none">‚Üê Anterior</button>
          <div class="ms-auto d-flex gap-2">
            <button id="saveBtn" class="btn btn-outline-secondary">Guardar</button>
            <button id="nextBtn" class="btn btn-primary">Siguiente</button>
          </div>
        </div>
      </div>
    </section>

    <section id="resultsCard" class="card border-0 shadow-sm mb-4 d-none">
      <div class="card-body p-4" id="report">
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4">
          <div>
            <p class="text-secondary mb-1">Resumen</p>
            <h2 class="h4 mb-0">Resultados por funci√≥n NIST</h2>
          </div>
          <div class="d-flex gap-2">
            <button id="downloadPdfBtn" class="btn btn-outline-secondary">Descargar PDF</button>
            <button id="restartBtn" class="btn btn-primary">Reiniciar</button>
          </div>
        </div>
        <div class="row g-3 align-items-center">
          <div class="col-12 col-lg-4">
            <div class="score-tile text-center p-4 rounded-4 bg-light">
              <div class="text-secondary small">Puntaje general</div>
              <div id="overallScore" class="display-4 fw-bold text-primary">--%</div>
              <div id="answeredCount" class="text-secondary small">0 de 0 respondidas</div>
            </div>
          </div>
          <div class="col-12 col-lg-8">
            <canvas id="radarChart" height="180" aria-label="Radar de funciones NIST" role="img"></canvas>
          </div>
        </div>

        <hr class="my-4" />
        <h3 class="h5 mb-2">Recomendaciones inmediatas</h3>
        <p class="text-secondary small">Se listan los controles respondidos como "No" o "No estoy seguro".</p>
        <div class="table-responsive">
          <table class="table align-middle" id="resultsTable">
            <thead class="table-light">
              <tr>
                <th>Funci√≥n</th>
                <th>ID</th>
                <th>Control</th>
                <th>Respuesta</th>
                <th>Recomendaci√≥n</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="data.js"></script>
  <script src="app.js"></script>
</body>
</html>
